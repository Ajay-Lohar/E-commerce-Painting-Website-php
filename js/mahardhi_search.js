$(document).ready((function(){$(".mahardhi-search input[name='search']").autocomplete({source:function(e,a){const r=$("#mahardhiSearch select[name='category_id']").val()?Number($("#mahardhiSearch select[name='category_id']").val()):0,c="index.php?route=extension/module/mahardhi_search&filter_name="+e.term+"&filter_category="+r;$.ajax({url:c,data:{keyword:e.term},dataType:"json",success:function(e){a($.map(e,(function(e){if(e.name)return{name:e.name,image:e.image,price:e.price,special:e.special,value:e.href}})))}})},minLength:1,select:function(e,a){if(""==a.item.value)return!1;var r=a.item.value.replace(/&amp;/g,"&");return location.href=r,!1},open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")},focus:function(e,a){var r=a.item.name.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"');return $('#search input[name="search"]').val(r),!1}}),$.ui.autocomplete.prototype._renderItem=function(e,a){var r=[],c='<div class="images"><img class="product-image img-responsive" src="'+a.image+'" /></div>';r.push({html:c});var i='<div class="product-detail"><span class="product-name">'+a.name+"</span>";r.push({html:i});var n="";n=a.special?'<div class="price"><span class="price-new">'+a.special+'</span><span class="price-old">'+a.price+"</span></div></div>":'<div class="price"><span class="price-new">'+a.price+"</span></div></div>",r.push({html:n});var s="";return $.each(r,(function(e,a){null!=a&&(s+=a.php)})),$("<li></li>").data("ui-autocomplete-item",a).append('<a href="'+a.value+'" class="mahardhi-search clearfix">'+s+"</a>").appendTo(e)}}));